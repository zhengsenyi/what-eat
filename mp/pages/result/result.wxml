<view class="container-result">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration">
    <view class="bg-confetti">
      <text class="confetti confetti-1">ğŸ‰</text>
      <text class="confetti confetti-2">âœ¨</text>
      <text class="confetti confetti-3">ğŸŠ</text>
      <text class="confetti confetti-4">â­</text>
      <text class="confetti confetti-5">ğŸ‰</text>
    </view>
  </view>

  <view class="main-card scale-in">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <view class="header">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">â†</text>
      </view>
      <text class="page-title">æŠ½é€‰ç»“æœ</text>
      <view class="share-btn" bindtap="onShare">
        <text class="share-icon">ğŸ“¤</text>
      </view>
    </view>
    
    <scroll-view scroll-y class="content-scroll" enhanced="{{true}}" show-scrollbar="{{false}}">
      <!-- ç»“æœå¤´éƒ¨ -->
      <view class="result-header">
        <view class="success-badge">
          <text class="badge-icon">ğŸ¯</text>
          <text class="badge-text">æŠ½é€‰æˆåŠŸ</text>
        </view>
        <text class="result-title">ä¸ºä½ æ¨è</text>
      </view>

      <!-- ä¸»ç»“æœå¡ç‰‡ -->
      <view class="result-card">
        <!-- å›¾ç‰‡åŒºåŸŸ -->
        <view class="card-image-wrapper">
          <image class="card-image" src="{{result.image}}" mode="aspectFill" lazy-load="{{true}}"></image>
          <view class="image-overlay">
            <view class="rating-badge">
              <text class="rating-star">â­</text>
              <text class="rating-value">{{result.rating}}</text>
            </view>
          </view>
          <view class="favorite-btn {{isFavorite ? 'active' : ''}}" bindtap="toggleFavorite">
            <text class="favorite-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
          </view>
        </view>
        
        <!-- ä¿¡æ¯åŒºåŸŸ -->
        <view class="card-content">
          <view class="content-header">
            <view class="dish-info">
              <text class="dish-name">{{result.name}}</text>
              <text class="restaurant-name">ğŸ“ {{result.restaurant}}</text>
            </view>
            <view class="price-tag">
              <text class="price-currency">Â¥</text>
              <text class="price-value">{{result.price}}</text>
              <text class="price-unit">/ä»½</text>
            </view>
          </view>

          <!-- æ ‡ç­¾ -->
          <view class="tags-wrapper">
            <view class="tag tag-primary" wx:for="{{result.tags}}" wx:key="*this" wx:if="{{index < 2}}">
              <text>{{item}}</text>
            </view>
            <view class="tag tag-secondary" wx:for="{{result.tags}}" wx:key="*this" wx:if="{{index >= 2}}">
              <text>{{item}}</text>
            </view>
          </view>

          <!-- æè¿° -->
          <view class="description-box">
            <text class="description-text">{{result.description}}</text>
          </view>

          <!-- ç”¨æˆ·è¯„ä»· -->
          <view class="review-card">
            <view class="review-header">
              <text class="review-icon">ğŸ’¬</text>
              <text class="review-label">ç”¨æˆ·è¯„ä»·</text>
            </view>
            <text class="review-text">"{{result.review}}"</text>
          </view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-section">
        <view class="action-grid">
          <view class="action-item" bindtap="reRoll">
            <view class="action-icon-wrapper refresh">
              <text class="action-icon">ğŸ”„</text>
            </view>
            <text class="action-label">æ¢ä¸€ä¸ª</text>
          </view>
          <view class="action-item" bindtap="toggleFavorite">
            <view class="action-icon-wrapper favorite {{isFavorite ? 'active' : ''}}">
              <text class="action-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
            </view>
            <text class="action-label">{{isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
          </view>
          <view class="action-item" bindtap="openNavigation">
            <view class="action-icon-wrapper navigation">
              <text class="action-icon">ğŸ“</text>
            </view>
            <text class="action-label">å¯¼èˆª</text>
          </view>
          <view class="action-item" bindtap="onShare">
            <view class="action-icon-wrapper share">
              <text class="action-icon">ğŸ“¤</text>
            </view>
            <text class="action-label">åˆ†äº«</text>
          </view>
        </view>
      </view>

      <!-- ç›¸ä¼¼æ¨è -->
      <view class="similar-section" wx:if="{{similarItems.length > 0}}">
        <view class="section-header">
          <text class="section-title">ğŸ½ï¸ ç›¸ä¼¼æ¨è</text>
          <text class="section-subtitle">ä½ å¯èƒ½ä¹Ÿå–œæ¬¢</text>
        </view>
        <scroll-view scroll-x class="similar-scroll" enhanced="{{true}}" show-scrollbar="{{false}}">
          <view class="similar-list">
            <view class="similar-card" wx:for="{{similarItems}}" wx:key="id" bindtap="selectSimilar" data-item="{{item}}">
              <view class="similar-image-wrapper">
                <image class="similar-image" src="{{item.image}}" mode="aspectFill" lazy-load="{{true}}"></image>
                <view class="similar-rating">
                  <text class="rating-star-sm">â­</text>
                  <text class="rating-value-sm">{{item.rating}}</text>
                </view>
              </view>
              <view class="similar-info">
                <text class="similar-name">{{item.name}}</text>
                <text class="similar-restaurant">{{item.restaurant}}</text>
                <text class="similar-price">Â¥{{item.price}}</text>
              </view>
            </view>
          </view>
        </scroll-view>
      </view>

      <!-- åº•éƒ¨æŒ‰é’® -->
      <view class="bottom-action">
        <button class="btn-confirm" bindtap="confirmChoice">
          <text class="btn-icon">âœ…</text>
          <text class="btn-text">å°±åƒè¿™ä¸ªï¼</text>
        </button>
      </view>

      <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
      <view class="safe-bottom"></view>
    </scroll-view>
  </view>
</view>
