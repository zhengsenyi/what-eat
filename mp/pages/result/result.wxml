<view class="container-result">
  <view class="main-card">
    <!-- è‡ªå®šä¹‰å¯¼èˆªæ  - é€‚é…èƒ¶å›Š -->
    <view class="custom-nav" style="padding-top: {{statusBarHeight}}px;">
      <view class="nav-content" style="height: {{navBarHeight}}px;">
        <view class="nav-left">
          <view class="back-btn" bindtap="goBack">
            <text class="back-icon">â†</text>
          </view>
          <text class="page-title">æŠ½é€‰ç»“æœ</text>
        </view>
        <!-- å³ä¾§åŒºåŸŸ -->
        <view class="nav-right">
          <view class="share-btn" bindtap="onShare">
            <text class="share-icon">ğŸ“¤</text>
          </view>
          <view class="nav-right-placeholder" style="width: {{menuButtonWidth}}px;"></view>
        </view>
      </view>
    </view>
    
    <scroll-view scroll-y class="content-scroll" enhanced="{{true}}" show-scrollbar="{{false}}">
      <!-- ç»“æœå¤´éƒ¨ -->
      <view class="result-header">
        <view class="success-badge">
          <text class="badge-icon">ğŸ¯</text>
          <text class="badge-text">æŠ½é€‰æˆåŠŸ</text>
        </view>
        <text class="result-title">ä¸ºä½ æ¨è</text>
        <text class="remaining-text" wx:if="{{remainingTimes >= 0}}">ä»Šæ—¥å‰©ä½™ {{remainingTimes}} æ¬¡</text>
      </view>

      <!-- ä¸»ç»“æœå¡ç‰‡ -->
      <view class="result-card">
        <!-- å›¾ç‰‡åŒºåŸŸ -->
        <view class="card-image-wrapper">
          <image 
            class="card-image" 
            src="{{result.image_url || '/static/icons/gift.png'}}" 
            mode="aspectFill" 
            lazy-load="{{true}}"
          ></image>
          <view class="image-overlay">
            <view class="category-badge">
              <text class="category-text">{{result.category}}</text>
            </view>
          </view>
          <view class="favorite-btn {{isFavorite ? 'active' : ''}}" bindtap="toggleFavorite">
            <text class="favorite-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
          </view>
        </view>
        
        <!-- ä¿¡æ¯åŒºåŸŸ -->
        <view class="card-content">
          <view class="content-header">
            <view class="dish-info">
              <text class="dish-name">{{result.name}}</text>
              <text class="dish-category">ğŸ·ï¸ {{result.category}}</text>
            </view>
            <view class="price-tag" wx:if="{{result.price}}">
              <text class="price-currency">Â¥</text>
              <text class="price-value">{{result.price}}</text>
            </view>
          </view>

          <!-- æè¿° -->
          <view class="description-box" wx:if="{{result.description}}">
            <text class="description-text">{{result.description}}</text>
          </view>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-section">
        <view class="action-grid">
          <view class="action-item" bindtap="reRoll">
            <view class="action-icon-wrapper refresh">
              <text class="action-icon">ğŸ”„</text>
            </view>
            <text class="action-label">æ¢ä¸€ä¸ª</text>
          </view>
          <view class="action-item" bindtap="toggleFavorite">
            <view class="action-icon-wrapper favorite {{isFavorite ? 'active' : ''}}">
              <text class="action-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
            </view>
            <text class="action-label">{{isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
          </view>
          <view class="action-item" bindtap="openNavigation">
            <view class="action-icon-wrapper navigation">
              <text class="action-icon">ğŸ“</text>
            </view>
            <text class="action-label">å¯¼èˆª</text>
          </view>
          <view class="action-item" bindtap="onShare">
            <view class="action-icon-wrapper share">
              <text class="action-icon">ğŸ“¤</text>
            </view>
            <text class="action-label">åˆ†äº«</text>
          </view>
        </view>
      </view>

      <!-- åº•éƒ¨å ä½ -->
      <view class="bottom-placeholder"></view>
    </scroll-view>

    <!-- åº•éƒ¨å›ºå®šæŒ‰é’® -->
    <view class="bottom-fixed">
      <button class="btn-confirm" bindtap="confirmChoice">
        <text class="btn-icon">âœ…</text>
        <text class="btn-text">å°±åƒè¿™ä¸ªï¼</text>
      </button>
    </view>
  </view>
</view>
